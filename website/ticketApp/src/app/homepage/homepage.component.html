<section id="header" *ngIf="recentFilms.length > 0">

  <div id="header_carousel" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators" *ngIf="recentFilms.length>1">
      <li data-target="#header_carousel" *ngFor="let film of recentFilms.slice(0,3); let i = index" data-slide-to="{{i}}" [ngClass]="{'active': i==0 }"></li>
    </ol>

    <!-- for top 3 movie -->
    <div class="carousel-inner">
      <div class="carousel-item" [ngClass]="{'active': film==recentFilms.slice(0,3)[0]}" *ngFor="let film of recentFilms.slice(0,3)"
           [ngStyle]="{'background-image': (film?'linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(' + [film.header] + ')':'')}">
        <div class="container-fluid header-info">
          <div class="row">
            <div class="col-lg-6 title">
              <h1 style="word-wrap: break-word"><strong>{{film.title}}</strong></h1>
              <div>
                <h5 *ngFor="let genre of film.genres "><strong>{{genre.genreName }}</strong></h5>
              </div><div>
                <h5><strong>{{film.year}}</strong></h5>
                <h5><strong>{{film.runtime}} min</strong></h5>
                <i class="material-icons">star</i>
                <span> {{ film.rating }} </span>
              </div>
              <div>
                <br>
                <a role="button" routerLink="/buyticket" class="btn btn-warning btn-lg">BOOK</a>
                <a role="button" routerLink="/movie/{{film.movieId}}" class="btn btn-outline-warning btn-lg text-white info-button">INFO</a>
              </div>
            </div>

            <div class="offset-lg-1 col-lg-5 description">
              <div>
                <h5 class="text-warning"><strong>Director:</strong></h5>
                <h5><strong>{{film.director}}</strong></h5>
              </div>

              <div>
                <h5 class="text-warning"><strong>Cast:</strong></h5>
                <h5 *ngFor="let actor of film.actors.slice(0,2)"><strong>{{ actor.actor }}</strong></h5>
              </div>
              <br>
              <div class="plot d-md-block d-none">
                <h5><strong>
                  {{film.plot}}
                </strong></h5>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <a class="carousel-control-prev" href="#header_carousel" role="button" data-slide="prev" *ngIf="recentFilms.length > 1">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#header_carousel" role="button" data-slide="next" *ngIf="recentFilms.length > 1">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>


  </div>


</section>

<section id="trending" *ngIf="popularFilms.length > 0">
  <div class="container">
    <div class="row d-flex justify-content-between">
      <div class="col-6">
        <h1 class="text-warning">Trending</h1>
      </div>
      <div class="col-6 align-self-end" style="text-align: right">
        <a routerLink="/movielist" class="text-warning">See more</a>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-3 col-12" *ngFor="let film of popularFilms">
        <a routerLink="/movie/{{film.movieId}}">
          <div class="card">
            <img class="card-img-top" src="{{film.picture}}" alt="{{film.title}} poster" style="width: 100%">
            <div class="card-body">
              <h3 class="text-truncate">{{film.title}}</h3>
              <h6><i class="material-icons">star</i>{{film.rating}}</h6>
              <h6>{{film.runtime}} min</h6>
            </div>
          </div>
        </a>
      </div>
    </div>

  </div>
</section>

<section id="new-in" *ngIf="recentFilms.length > 0">
  <div class="container">
    <div class="row d-flex justify-content-between">
      <div class="col-6">
        <h1 class="text-warning">New in</h1>
      </div>
      <div class="col-6 align-self-end" style="text-align: right">
        <a routerLink="/movielist" class="text-warning">See more</a>
      </div>
    </div>
    <div class="row">
      <div class="col-lg-3 col-12" *ngFor="let film of recentFilms">
        <a routerLink="/movie/{{film.movieId}}">
          <div class="card">
            <img class="card-img-top" src="{{film.picture}}" alt="{{film.title}} poster" style="width: 100%">
            <div class="card-body">
              <h3 class="text-truncate">{{film.title}}</h3>
              <h6><i class="material-icons">star</i>{{film.rating}}</h6>
              <h6>{{film.runtime}} min</h6>
            </div>
          </div>
        </a>
      </div>
    </div>

  </div>
</section>
